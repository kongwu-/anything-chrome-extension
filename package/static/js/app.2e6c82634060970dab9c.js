webpackJsonp([1],{109:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(110);a(111);e.default={name:"app",data:function(){return{currentPage:1,pageSize:20,total:0,switchEmpty:!0,exportLoading:!1,switchDetail:!1,pickerOptions:{shortcuts:[{text:"今天",onClick:function(t){var e=new Date,a=new Date;t.$emit("pick",[a,e])}},{text:"昨天",onClick:function(t){var e=new Date,a=new Date,i=a.getTime()-864e5;a.setTime(i),e.setTime(i),t.$emit("pick",[a,e])}},{text:"最近三天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e5),t.$emit("pick",[a,e])}},{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},dateRange:"",allData:[],filterData:[],dataList:[],loading:!1}},methods:{exportData:function(){var t=this,e=this;e.exportLoading=!0;var a=(e.switchEmpty?e.filterData:e.allData).clone();e.switchDetail||a.forEach(function(t){delete t.images,delete t.title}),e.$http.post(i.a.exportData,a).then(function(a){if(e.exportLoading=!1,0==a.code){var i=a.data;t.$message({message:a.msg,type:"success"}),location.href=i}else t.$message.error(a.msg)})},page:function(t){var e=this;e.currentPage=t;var a=(t-1)*e.pageSize,i=a+e.pageSize-1;e.switchEmpty?(e.dataList=e.filterData.slice(a,i),e.total=e.filterData.length):(e.dataList=e.allData.slice(a,i),e.total=e.allData.length)},filterEmpty:function(t){this.switchEmpty=t,this.page(1)},loadData:function(){var t=this;t.loading=!0;var e=[],a=[],n=t.dateRange[0].format("yyyy-MM-dd"),l=t.dateRange[1].format("yyyy-MM-dd");t.$http.get(i.a.planList,{params:{param:'{"status":"0","page":1,"size":1000,"pageIndex":1,"pageSize":1000}'}}).then(function(o){var r=o.object;if(1==o.code){var s=r.list,c=0,p=[],u=0;s.forEach(function(e){t.$http.get(i.a.adList,{params:{param:'{"status":8,"page":1,"size":1000,"uuid":"{0}","pageIndex":1,"pageSize":1000}'.format(e.uuid)}}).then(function(t){t.object.list.forEach(function(t){t.plan=e.name,p.push(t)}),c++})});var g=setInterval(function(){c>=s.length&&(p.forEach(function(o){t.$http.get(i.a.adView,{params:{param:'{"uuid":"{0}"}'.format(o.uuid)}}).then(function(r){t.$http.get(i.a.listDayData,{params:{param:'{"uuid":"{0}","startDate":"{1}","endDate":"{2}"}'.format(o.uuid,n,l)}}).then(function(t){t.object.list.forEach(function(t){t.title=r.object.materialTitle;var i=[];r.object.materialFileUrl.split(",").forEach(function(t){i.push("https://swsdl.vivo.com.cn"+t)}),t.images=i,t.ad=o.name,t.plan=o.plan,t.spent=(t.spent/1e5).toFixed(2),t.clickRate=(100*(t.clickCount/t.showCount||0)).toFixed(2),t.clickPrice=(t.spent/t.clickCount||0).toFixed(2),0==t.clickCount&&0==t.showCount&&0==t.spent||e.push(t),a.push(t),u++})})})}),clearInterval(g))},100),d=setInterval(function(){u>=p.length&&0!=p.length&&(t.allData=a,t.filterData=e,t.switchEmpty?t.total=e.length:t.total=a.length,t.loading=!1,t.page(1),clearInterval(d))},100)}else t.loading=!1,t.$message.error(o.errorCodeMsg.errorMsg)})}}}},110:function(t,e,a){"use strict";var i="https://e.vivo.com.cn/api/",n={planList:i+"plan/list",adList:i+"ad/list",listDayData:i+"ad/listDayData",adView:i+"ad/view",exportData:"http://123.206.204.198/export/vivoDayData"};e.a=n},111:function(t,e,a){"use strict";var i=a(115),n=a.n(i),l=a(90),o=a.n(l),r=a(3);r.default.prototype.$http=o.a,o.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",String.prototype.format=function(t){var e=this;if(arguments.length>0)if(1==arguments.length&&"object"==(void 0===t?"undefined":n()(t))){for(var a in t)if(void 0!=t[a]){var i=new RegExp("({"+a+"})","g");e=e.replace(i,t[a])}}else for(var l=0;l<arguments.length;l++)if(void 0!=arguments[l]){var i=new RegExp("({)"+l+"(})","g");e=e.replace(i,arguments[l])}return e},Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.removeVal=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)},Array.prototype.remove=function(t){if(isNaN(t)||t>this.length)return!1;for(var e=0,a=0;e<this.length;e++)this[e]!=this[t]&&(this[a++]=this[e]);this.length-=1},Array.prototype.clone=function(){return this.concat()},o.a.interceptors.response.use(function(t){return 200!=t.status&&actual.a.Message({showClose:!0,message:"请求出错啦",type:"error"}),t.data},function(t){return actual.a.Message({showClose:!0,message:"请求出错啦",type:"error"}),target.a.reject(t)}),r.default.filter("toFixed",function(t){return isNaN(t)?t:(console.debug(t.toFixed(2)),t.toFixed(2))}),r.default.filter("format",function(t){var e="yyyy-mm-dd",a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var i;for(i in a)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return e}),Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));var a;for(a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t}},112:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(3),n=a(65),l=a.n(n),o=a(66),r=(a.n(o),a(67)),s=(a.n(r),a(68)),c=a.n(s);i.default.config.productionTip=!1,i.default.use(l.a),new i.default({el:"#app",template:"<App/>",components:{App:c.a}})},163:function(t,e){},167:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"layout"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"wrap",attrs:{"element-loading-text":"越着急越慢越容易出错，等会就好~"}},[a("div",{staticClass:"toolbox"},[a("el-date-picker",{attrs:{type:"daterange",align:"right",placeholder:"选择日期范围",editable:"false",clearable:"false","picker-options":t.pickerOptions},on:{change:t.loadData},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}}),t._v(" "),a("el-switch",{staticStyle:{"margin-left":"15px"},attrs:{"on-text":"过滤","off-text":"不用"},on:{change:t.filterEmpty},model:{value:t.switchEmpty,callback:function(e){t.switchEmpty=e},expression:"switchEmpty"}}),t._v(" "),a("el-switch",{staticStyle:{"margin-left":"15px"},attrs:{"on-text":"详情","off-text":"基本"},model:{value:t.switchDetail,callback:function(e){t.switchDetail=e},expression:"switchDetail"}}),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"info",loading:t.exportLoading},on:{click:t.exportData}},[t._v("导出")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dataList,stripe:""}},[a("el-table-column",{attrs:{prop:"plan",label:"所在计划"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ad",label:"广告"}}),t._v(" "),t.switchDetail?a("el-table-column",{attrs:{prop:"title",label:"标题"}}):t._e(),t._v(" "),t.switchDetail?a("el-table-column",{attrs:{prop:"images",label:"图片",width:"450"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"image-list"},t._l(e.row.images,function(t){return a("img",{attrs:{src:t}})}))]}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"date",label:"日期"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"showCount",label:"曝光量"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"clickCount",label:"点击量"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"clickRate",label:"点击率（%）"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"clickPrice",label:"点击均价（￥）"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"spent",label:"花费（￥）"}})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage},on:{"current-change":t.page}})],1)],1)])])},staticRenderFns:[]}},66:function(t,e){},67:function(t,e){},68:function(t,e,a){function i(t){a(163)}var n=a(166)(a(109),a(167),i,null,null);t.exports=n.exports}},[112]);
//# sourceMappingURL=app.2e6c82634060970dab9c.js.map